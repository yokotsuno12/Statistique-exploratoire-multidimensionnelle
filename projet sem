/* PROJET SEM - Chaima Abdellali; Léo Déchaumet; Pépita Kenesi Laurent - */




/* Question 1 : On importe les données */
PROC IMPORT file = "/home/u59521311/projet final/don2.sas7bdat" out = projet.don dbms=tab ;
run;

PROC IMPORT file = "/home/u59521311/projet final/log.sas7bdat" out = projet.log dbms=tab ;
run; /*Remarque : c'est la transposée de projet.don*/ 

/* On prépare les formats pour la question 2*/
proc format;
	value rdeux 1="Male" 2="Female";
run;

proc format;
	value rcinq 1="Never" 2="Less often" 3="Once every 4 to 6 months"
	4="Once every 2 or 3 months" 5="1 to 3 times per month"
	6="1 to 4 times per week" 7="Almost every day or more often";
run;

/* Questions 2 et 3 : On modifie les formats et on ajoute la variable tranche_age dans le data */
data xy ;
format r2 rdeux. ; 
format r5 rcinq. ;
set projet.log;
length tranche_age $5;
select ; 
when (r3<35) tranche_age="20-34";
when (34<r3 and r3<50) tranche_age="35-49";
otherwise tranche_age="50-65"; 
end; 
run;

/*Question 4*/

/*Répartition de l'échantillon en age : */
proc sgplot data=xy;
   histogram r3;
   title "Répartition selon l'age";
run;


/*Répartition de l'échantillon selon le sexe*/
proc sgplot data=xy;
   histogram r2;
   title "Répartition selon le sexe";
run;

/*Répartition de l'échantillon selon le revenu annuel*/

proc sgplot data=xy;
   histogram r12;
   title "Répartition selon le revenu annuel";
run;

/*Répartition de l'échantillon selon le statut marital*/

proc sgplot data=xy;
   histogram r13;
   title "Répartition selon le statut marital";
run;

/*Répartition de l'échantillon selon la présence d'enfants*/

proc sgplot data=xy;
   histogram r14;
   title "Répartition selon la présence d'enfants";
run;

/*Question 5*/

proc sgplot data=projet.log_formated;
histogram R2;
title "repartition homme femme";
run;

proc freq data=projet.log_formated;
tables r2 * cognac / cellchi2 chisq nocol nofreq;
run;
/*a. Les hommes et les femmes consomment-ils de la même façon du cognac ?
Réponse : On remarque que les hommes consomment en moyenne plus souvent du cognac que les femmes: 
On a environ 49 % de réponses positives chez les hommes et 45% de réponses positives chez les femmes. 
Donc environ 4% d'écart : mais est-ce représentatif ? On a 26 % de femmes qui ont répondu */

proc freq data=projet.log_formated;
tables tranche_age * cognac / cellchi2 chisq nocol nofreq;
run;

/*PARTIE B : pb : ia1_* ne contient que 0 ou 1*/

/*
data xyz ;
set xy ;
if (ia1_1 = 1 or ia1_1 = 2 or ia1_1 = 3) then ia1_1 = 0;
else if (ia1_1 = 4) then ia1_1 = 0.7 ;
else  ia_1 = 1 ;
run ; */
